"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("./runtime-dom.esm-bundler-CpPN6FZI.cjs"),E=["placeholder"],T={key:0,class:"absolute top-14 left-0 w-full bg-white/95 dark:bg-gray-800/95 backdrop-blur-2xl rounded-xl shadow-2xl border border-gray-100 dark:border-gray-700 overflow-hidden z-50 flex flex-col origin-top will-change-transform"},$={key:0,class:"p-4 space-y-3"},z={key:1,class:"p-6 text-center text-gray-400 dark:text-gray-500"},q={class:"text-sm"},S={class:"font-bold text-gray-600 dark:text-gray-300"},M={key:2,class:"max-h-80 overflow-y-auto py-2 custom-scrollbar",role:"listbox"},L=["onClick","onMouseenter","aria-selected"],D={class:"flex flex-col"},F=["innerHTML"],A={class:"text-[10px] uppercase tracking-wider text-gray-400 dark:text-gray-500"},U={key:3,class:"bg-gray-50 dark:bg-gray-900/50 px-4 py-2 text-[10px] uppercase tracking-wide text-gray-400 flex justify-between items-center"},j=300,P=e.defineComponent({__name:"Search",props:{suggestions:{},onFocus:{type:Function},_p:{},_$p:{}},emits:["update:query","select"],setup(r,{emit:u}){const d=r,s=d._$p,o=u,n=e.ref(""),l=e.shallowRef([]),g=e.ref(!1),c=e.ref(-1),f=e.ref(null),v=e.ref(!1);let i;const w={sm:{wrapper:"h-9 rounded-xl",iconBox:"w-9",icon:"h-4 w-4",input:"text-sm",dropdownTop:"top-11",itemPadding:"px-3 py-2"},md:{wrapper:"h-12 rounded-2xl",iconBox:"w-12",icon:"h-5 w-5",input:"text-base",dropdownTop:"top-14",itemPadding:"px-4 py-3"},xl:{wrapper:"h-14 rounded-2xl",iconBox:"w-14",icon:"h-6 w-6",input:"text-lg",dropdownTop:"top-16",itemPadding:"px-5 py-4"},xxl:{wrapper:"h-16 rounded-3xl",iconBox:"w-16",icon:"h-7 w-7",input:"text-xl",dropdownTop:"top-20",itemPadding:"px-6 py-5"}},B=e.computed(()=>s.data.curr.data.size||"md"),m=e.computed(()=>w[B.value]);e.watch(()=>d.suggestions,t=>{l.value=Array.isArray(t)?t:[],g.value=!0,v.value=!1},{immediate:!0});const b=()=>{const t=n.value.trim();if(i&&clearTimeout(i),!t){l.value=[],g.value=!1,v.value=!1,o("update:query",{query:"",suggestions:[]});return}v.value=!0,i=window.setTimeout(()=>{o("update:query",{query:t,suggestions:l.value})},j)},N=t=>{!g.value||l.value.length===0||(t.key==="ArrowDown"?(t.preventDefault(),c.value=(c.value+1)%l.value.length):t.key==="ArrowUp"?(t.preventDefault(),c.value=(c.value-1+l.value.length)%l.value.length):t.key==="Enter"&&c.value>=0?(t.preventDefault(),i&&clearTimeout(i),x(l.value[c.value])):t.key==="Escape"&&(g.value=!1))},x=t=>{n.value=t.title,g.value=!1,c.value=-1,o("select",t)},V=()=>{i&&clearTimeout(i),n.value="",l.value=[],g.value=!1,c.value=-1,v.value=!1,o("update:query",{query:"",suggestions:[]})},_=t=>{if(!n.value)return t;const a=n.value.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return t.replace(new RegExp(`(${a})`,"gi"),'<span class="font-bold text-purple-600">$1</span>')},k=t=>{f.value&&!f.value.contains(t.target)&&(g.value=!1)};return e.onMounted(()=>{document.addEventListener("mousedown",k)}),e.onUnmounted(()=>{i&&clearTimeout(i),document.removeEventListener("mousedown",k)}),(t,a)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"searchContainer",ref:f,class:"relative w-full group z-50"},[e.createBaseVNode("div",{class:e.normalizeClass(["relative flex items-center w-full shadow-md overflow-hidden transition-all duration-200 bg-white/95 dark:bg-gray-800/95 backdrop-blur-md border border-gray-100 dark:border-gray-700 group-focus-within:ring-2 group-focus-within:ring-purple-500/50 group-focus-within:border-transparent hover:scale-[1.005]",m.value.wrapper])},[e.createBaseVNode("div",{class:e.normalizeClass(["grid place-items-center h-full text-gray-400 group-focus-within:text-purple-500 transition-colors",m.value.iconBox])},[(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",class:e.normalizeClass(m.value.icon)},[...a[2]||(a[2]=[e.createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"},null,-1)])],2))],2),e.withDirectives(e.createBaseVNode("input",{"onUpdate:modelValue":a[0]||(a[0]=p=>n.value=p),onInput:b,onKeydown:N,onFocus:a[1]||(a[1]=(...p)=>r.onFocus&&r.onFocus(...p)),class:e.normalizeClass(["peer h-full w-full outline-none bg-transparent placeholder-gray-400 font-medium text-gray-700 dark:text-gray-100 pr-2",m.value.input]),type:"text",placeholder:`${e.unref(s).data.curr.data.placeholder||"Search..."}`,autocomplete:"off"},null,42,E),[[e.vModelText,n.value]]),n.value?(e.openBlock(),e.createElementBlock("div",{key:0,onClick:V,class:"cursor-pointer p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"},[...a[3]||(a[3]=[e.createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[e.createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"})],-1)])])):e.createCommentVNode("",!0)],2),e.unref(s).data.curr.data.show_sugg?(e.openBlock(),e.createBlock(e.Transition,{key:0,"enter-active-class":"transition duration-200 ease-out","enter-from-class":"transform scale-95 opacity-0 translate-y-[-10px]","enter-to-class":"transform scale-100 opacity-100 translate-y-0","leave-active-class":"transition duration-150 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:e.withCtx(()=>[g.value&&n.value?(e.openBlock(),e.createElementBlock("div",T,[v.value&&l.value.length===0?(e.openBlock(),e.createElementBlock("div",$,[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(3,p=>e.createBaseVNode("div",{key:p,class:"flex items-center space-x-3 animate-pulse"},[...a[4]||(a[4]=[e.createBaseVNode("div",{class:"h-8 w-8 bg-gray-200 dark:bg-gray-700 rounded-full"},null,-1),e.createBaseVNode("div",{class:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"},null,-1)])])),64))])):!v.value&&l.value.length===0?(e.openBlock(),e.createElementBlock("div",z,[e.createBaseVNode("p",q,[a[5]||(a[5]=e.createTextVNode('No result found for "',-1)),e.createBaseVNode("span",S,e.toDisplayString(n.value),1),a[6]||(a[6]=e.createTextVNode('"',-1))])])):(e.openBlock(),e.createElementBlock("ul",M,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,(p,y)=>(e.openBlock(),e.createElementBlock("li",{key:y,onClick:C=>x(p),onMouseenter:C=>c.value=y,role:"option","aria-selected":c.value===y,class:e.normalizeClass(["px-4 py-3 cursor-pointer transition-colors flex items-center gap-3 border-b border-gray-50 dark:border-gray-700/30 last:border-0",c.value===y?"bg-purple-50 dark:bg-purple-900/30":"hover:bg-gray-50 dark:hover:bg-gray-700/30"])},[a[7]||(a[7]=e.createBaseVNode("div",{class:"h-8 w-8 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-gray-500 dark:text-gray-300 shrink-0"},[e.createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e.createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),e.createBaseVNode("div",D,[e.createBaseVNode("span",{class:"text-sm font-medium text-gray-800 dark:text-gray-200",innerHTML:_(p?.[e.unref(s).data.curr.data.map.title]||"")},null,8,F),e.createBaseVNode("span",A,e.toDisplayString(p?.[e.unref(s).data.curr.data.map.label]||""),1)])],42,L))),128))])),l.value.length>0?(e.openBlock(),e.createElementBlock("div",U,[e.createBaseVNode("span",null,e.toDisplayString(l.value.length)+" Results",1),a[8]||(a[8]=e.createTextVNode()),a[9]||(a[9]=e.createBaseVNode("span",{class:"hidden md:inline"},[e.createTextVNode("Use "),e.createBaseVNode("kbd",{class:"font-sans border border-gray-300 dark:border-gray-600 rounded px-1 mx-1"},"↑↓"),e.createTextVNode(" to navigate")],-1))])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]),_:1})):e.createCommentVNode("",!0)],512))}}),R=(r,u)=>{const d=r.__vccOpts||r;for(const[s,o]of u)d[s]=o;return d},I=R(P,[["__scopeId","data-v-732773ec"]]),O=e.defineComponent({__name:"index",props:{_p:{},_$p:{}},setup(r){const u=e.ref([]);r._p.f.listen("msg",o=>{o.type==="search:query"&&(u.value=[...o._$p?.data?.curr?.data?.sugg??[]])});const d=async o=>{await r._p.f.call("msg",{type:"search:query",_p:{query:o.query},_$p:r._$p})},s=async o=>{await r._p.f.call("msg",{type:"search:select",_p:{item:o},_$p:r._$p})};return(o,n)=>(e.openBlock(),e.createElementBlock("div",{"class-old":"p-1 bg-red-100",class:e.normalizeClass(r._$p.data.curr.data.class||"")},[e.createVNode(I,{suggestions:u.value,_p:r._p,_$p:r._$p,"onUpdate:query":d,onSelect:s},null,8,["suggestions","_p","_$p"])],2))}}),h=async r=>({set:async u=>{console.log(`--hydrator [${u.data.curr.type}]`);const d={_p:r,_$p:u},s=e.createApp(O,d),o={r:"",style:"",evt:{change:()=>{r.f.call("msg",{type:"change",_p:r,_$p:u,custom:{}})}}},n=document.getElementById(r.f.name("vue-root"));return s.mount(n),o}});exports.hydrator=h;exports.index=h;
