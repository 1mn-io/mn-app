"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("./runtime-dom.esm-bundler-BwwG3C4Q.cjs"),L={class:"relative flex items-center group px-4 md:px-0"},M={class:"hidden md:block relative flex-shrink-0 h-full"},O={key:0,class:"absolute top-full left-0 z-[60] mt-1 w-48 bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-lg shadow-xl py-2"},J=["onClick"],$={class:"relative flex-1"},U=["placeholder"],j=["disabled"],D={key:0,class:"absolute top-full left-0 right-0 z-50 mt-2 mx-4 md:mx-0 rounded-xl shadow-2xl overflow-hidden border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900"},R={key:0,class:"p-6 flex justify-center"},X={key:1,class:"max-h-[60vh] overflow-y-auto"},Z={class:"px-4 py-3 bg-gray-50 dark:bg-gray-800/50 border-b dark:border-gray-800 flex justify-between items-center"},G={class:"text-[10px] text-pink-600 font-bold uppercase"},Y={class:"p-2"},A=["onClick"],F={class:"flex-1"},q=["innerHTML"],K={key:0,class:"text-[10px] text-gray-400 uppercase"},P=e.defineComponent({__name:"SearchBar",props:{_p:{},_$p:{},_$cb:{},config:{}},setup(s){const g=s,u=e.ref(!1),v=()=>{u.value=window.innerWidth<768},h=e.ref([{id:"all",name:"All Categories"}]),i=e.ref(h.value[0]),c=e.ref(!1),f=r=>{i.value=r,c.value=!1,a.value&&w()},I=async()=>{try{const o=await(await fetch("https://fastapi.dryutil.1mn.io/client/api/i/ona/product_dir?typ=get_filter_data",{method:"POST",headers:{accept:"application/json","Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImYwZTNlMDRiLTVkNDAtNDg1ZS05OGU4LWEzOTI3NWU3MzM0OCIsInNlY3VyaXR5Ijp7InBhcnR5IjpbInBhcnR5XzEiLCJwYXJ0eV8yIl19LCJzdWIiOiJmMGUzZTA0Yi01ZDQwLTQ4NWUtOThlOC1hMzkyNzVlNzMzNDgiLCJpYXQiOjE3NjU4MTI4Mjh9.OoClnPtlxI71L-e555nbNSmenmGufxewp78SlmdZCNxeuauXao5RRvqwOKQ77SJFqJXk0ng6GZ7VOgYECdEf-3k1UGX7w1NE_D5A6SP3UkVsSG8orYACFuvTyesbFwkpnEhdu0PBd6n8wuLkgU6nZ1bLDzKVg1zd8fFeJrwmUqk"},body:JSON.stringify({raw_text:"_",collection:"products",sattr_k:"category",sattr_v:""})})).json();if(o.success&&o.filters){const p=o.filters.find(m=>m.typ==="category");if(p&&p.l){const m=p.l.map(_=>({id:_.name.toLowerCase(),name:_.name}));h.value=[{id:"all",name:"All Categories"},...m]}}}catch(r){console.error("Failed to fetch categories:",r)}},a=e.ref(""),d=e.ref(!1),k=e.ref(!1),l=e.ref([]),n=e.ref(-1),b=e.ref(null),S=e.ref(),y=e.computed(()=>({placeholder:"Search products...",debounceTime:300,maxSuggestions:8,theme:"light",...g.config})),z=()=>{if(clearTimeout(b.value),n.value=-1,!a.value.trim()){d.value=!1;return}k.value=!0,d.value=!0,b.value=setTimeout(()=>w(),y.value.debounceTime)},w=async()=>{try{const o=await(await fetch("https://fastapi.dryutil.1mn.io/client/api/i/ona/product_dir?typ=search_suggestion",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImYwZTNlMDRiLTVkNDAtNDg1ZS05OGU4LWEzOTI3NWU3MzM0OCIsInNlY3VyaXR5Ijp7InBhcnR5IjpbInBhcnR5XzEiLCJwYXJ0eV8yIl19LCJzdWIiOiJmMGUzZTA0Yi01ZDQwLTQ4NWUtOThlOC1hMzkyNzVlNzMzNDgiLCJpYXQiOjE3NjU4MTI4Mjh9.OoClnPtlxI71L-e555nbNSmenmGufxewp78SlmdZCNxeuauXao5RRvqwOKQ77SJFqJXk0ng6GZ7VOgYECdEf-3k1UGX7w1NE_D5A6SP3UkVsSG8orYACFuvTyesbFwkpnEhdu0PBd6n8wuLkgU6nZ1bLDzKVg1zd8fFeJrwmUqk"},body:JSON.stringify({search_text:a.value,collection:"products",category_context:u.value?"all":i.value.id})})).json();o.success&&(l.value=(o.l||[]).slice(0,y.value.maxSuggestions))}catch(r){console.error(r)}finally{k.value=!1}},T=(r,t)=>{if(!t||!r)return r;const o=new RegExp(`(${t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return r.replace(o,'<span class="font-bold text-pink-600">$1</span>')},x=()=>{if(n.value>=0&&l.value[n.value]){B(l.value[n.value]);return}if(!a.value.trim())return;d.value=!1;let t=`/search?q=${encodeURIComponent(a.value.trim())}`;i.value.id!=="all"&&(t+=`&category=${i.value.id}`),window.location.href=t},B=r=>{r.slug&&(d.value=!1,a.value=r.title,window.location.href=r.slug)},E=()=>{a.value="",l.value=[],d.value=!1},N=r=>{l.value.length&&(r==="down"?n.value=(n.value+1)%l.value.length:n.value=n.value<=0?l.value.length-1:n.value-1)},C=()=>{d.value=!1,n.value=-1};return e.onMounted(()=>{v(),I(),window.addEventListener("resize",v),document.addEventListener("click",r=>{r.target.closest(".search-container")||(C(),c.value=!1)})}),e.onUnmounted(()=>{window.removeEventListener("resize",v)}),(r,t)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["search-container w-full max-w-4xl mx-auto",{dark:y.value.theme==="dark"}])},[e.createBaseVNode("div",L,[e.createBaseVNode("div",M,[e.createBaseVNode("button",{onClick:t[0]||(t[0]=o=>c.value=!c.value),class:"flex items-center gap-2 px-4 py-3 text-sm font-medium text-gray-700 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 border-y border-l border-gray-300 dark:border-gray-700 rounded-l-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors whitespace-nowrap"},[e.createTextVNode(e.toDisplayString(i.value.name)+" ",1),(e.openBlock(),e.createElementBlock("svg",{class:e.normalizeClass(["w-4 h-4 transition-transform",{"rotate-180":c.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[5]||(t[5]=[e.createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))]),c.value?(e.openBlock(),e.createElementBlock("div",O,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(h.value,o=>(e.openBlock(),e.createElementBlock("button",{key:o.id,onClick:p=>f(o),class:"w-full text-left px-4 py-2 text-sm hover:bg-pink-50 dark:hover:bg-pink-900/20 hover:text-pink-600 dark:text-gray-300 transition-colors"},e.toDisplayString(o.name),9,J))),128))])):e.createCommentVNode("",!0)]),e.createBaseVNode("div",$,[e.withDirectives(e.createBaseVNode("input",{ref_key:"searchInput",ref:S,"onUpdate:modelValue":t[1]||(t[1]=o=>a.value=o),placeholder:`Search ${u.value?"products":"in "+i.value.name}...`,onInput:z,onFocus:t[2]||(t[2]=o=>d.value=!0),onKeydown:[e.withKeys(x,["enter"]),e.withKeys(C,["escape"]),t[3]||(t[3]=e.withKeys(o=>N("down"),["down"])),t[4]||(t[4]=e.withKeys(o=>N("up"),["up"]))],class:e.normalizeClass(["w-full pl-4 pr-12 py-3 text-sm focus:outline-none dark:bg-gray-900 dark:text-white placeholder-gray-400 transition-all","border dark:border-gray-700","rounded-l-lg md:rounded-none md:border-y md:border-x-0"])},null,40,U),[[e.vModelText,a.value]]),a.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:E,class:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-pink-600"},[...t[6]||(t[6]=[e.createBaseVNode("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e.createBaseVNode("path",{d:"M6 18L18 6M6 6l12 12","stroke-width":"2"})],-1)])])):e.createCommentVNode("",!0)]),e.createBaseVNode("button",{onClick:x,disabled:!a.value,class:"flex-shrink-0 px-5 md:px-6 py-3 bg-pink-600 hover:bg-pink-700 disabled:bg-gray-300 dark:disabled:bg-gray-800 text-white font-bold text-sm uppercase tracking-wide rounded-r-lg shadow-lg transition-all active:scale-95"},[...t[7]||(t[7]=[e.createBaseVNode("svg",{class:"w-5 h-5 md:hidden",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e.createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1),e.createBaseVNode("span",{class:"hidden md:block"},"Search",-1)])],8,j),e.createVNode(e.Transition,{name:"slide-up"},{default:e.withCtx(()=>[d.value&&(l.value.length>0||k.value)?(e.openBlock(),e.createElementBlock("div",D,[k.value?(e.openBlock(),e.createElementBlock("div",R,[...t[8]||(t[8]=[e.createBaseVNode("div",{class:"w-6 h-6 border-2 border-pink-500 border-t-transparent rounded-full animate-spin"},null,-1)])])):(e.openBlock(),e.createElementBlock("div",X,[e.createBaseVNode("div",Z,[t[9]||(t[9]=e.createBaseVNode("h3",{class:"text-[10px] font-black uppercase tracking-widest text-gray-500"},"Suggested Results",-1)),e.createBaseVNode("span",G,e.toDisplayString(l.value.length)+" found",1)]),e.createBaseVNode("div",Y,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,(o,p)=>(e.openBlock(),e.createElementBlock("button",{key:p,onClick:m=>B(o),class:e.normalizeClass(["flex items-center w-full p-3 rounded-lg text-left transition-all",n.value===p?"bg-pink-50 dark:bg-pink-900/20 text-pink-700 dark:text-pink-400":"hover:bg-gray-50 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"])},[t[10]||(t[10]=e.createBaseVNode("div",{class:"w-8 h-8 rounded-md bg-gray-100 dark:bg-gray-800 flex items-center justify-center mr-3 flex-shrink-0"},[e.createBaseVNode("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e.createBaseVNode("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z","stroke-width":"2"})])],-1)),e.createBaseVNode("div",F,[e.createBaseVNode("span",{class:"text-sm font-medium",innerHTML:T(o.title,a.value)},null,8,q),o.category?(e.openBlock(),e.createElementBlock("p",K,e.toDisplayString(o.category),1)):e.createCommentVNode("",!0)])],10,A))),128))])]))])):e.createCommentVNode("",!0)]),_:1})])],2))}}),Q=e.defineComponent({__name:"index",props:{_p:{},_$p:{},_$cb:{}},setup(s){return(g,u)=>(e.openBlock(),e.createBlock(P,{_p:s._p,_$p:s._$p,_$cb:s._$cb},null,8,["_p","_$p","_$cb"]))}}),V=async s=>({set:async(g,u)=>{console.log(`--hydrator [${g.data.curr.type}]`);const v={_p:s,_$p:g,_$cb:u},h=e.createApp(Q,v),i={r:"",style:"",evt:{change:()=>{u?.change({_$p:g})}}},c=document.getElementById(s.f.name("vue-root"));return h.mount(c),i}});exports.hydrator=V;exports.index=V;
